<mvc:View controllerName="project5.controller.View2"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:webc="sap.ui.webc.main"
    xmlns:form="sap.ui.layout.form"
    xmlns:l="sap.ui.layout"
    xmlns:html="http://www.w3.org/1999/xhtml">
    <Page id="page2" title="Adicionar um motorista" showNavButton="false" navButtonPress="onButtonCancel" >
        <content>
            <VBox id="vbox01" class="sapUiSmallMargin">

                <form:Form editable="true" visible="true" id="form2">
                    <form:layout>
                        <form:ResponsiveGridLayout labelSpanXL="4" labelSpanM="12" adjustLabelSpan="false" emptySpanXL="0" columnsXL="2" singleContainerFullSize="false" />
                    </form:layout>
                    <form:title>
                        <core:Title id="titleMatricula" text="Detalhes do motorista" level="Auto" />
                    </form:title>
                    <form:formContainers>
                        <form:FormContainer visible="true" title="Detalhes">

                            <form:formElements>
                                <form:FormElement visible="true">
                                    <form:label>
                                        <Label text="Nome" />
                                    </form:label>

                                    <form:fields>
                                        <Input required="true" id="nameInput" placeholder="Nome" showSuggestion="true" showValueHelp="false" fieldGroupIds="Group1"/>
                                    </form:fields>
                                </form:FormElement>

                                
                                <form:FormElement id="formStatus" visible="false">
                                    <form:label>
                                        <Label text="Status"/>
                                    </form:label>


                                    <form:fields>
                                        <ComboBox   id="statusMotorista"  change="handleChange"  selectionChange="handleSelectionChange" ariaLabelledBy="suggestionsComboBoxLabel"  selectedKey="1" 
                                        items="{
                                            path: 'statusMotorista>/'
                                         }">
                                         <items>
                                            <core:Item  key="{statusMotorista>key}" text="{statusMotorista>text}"  />
                                         </items>
                                      
                                        </ComboBox>

                                    </form:fields>
                                </form:FormElement>

                                <form:FormElement id="formCadastro" visible="false">
                                    <form:label>
                                        <Label text="Cadastrado em" />
                                    </form:label>

                                    <form:fields>
                                        <Text id="textCadastradoEm"></Text>
                                    </form:fields>
                                </form:FormElement>


                                <form:FormElement id="formModificado" visible="false">
                                    <form:label>
                                        <Label  text="Modificado em" />
                                    </form:label>

                                    <form:fields>
                                     <Text id="textModificadoEm" ></Text>
                                    </form:fields>
                                </form:FormElement>


                            </form:formElements>
                        </form:FormContainer>

                        <form:FormContainer title="Transporte">

                            <form:formElements>

                                <form:FormElement>
                                    <form:label>
                                        <Label text="Transportadora" design="Standard" textAlign="Begin" textDirection="Inherit" />
                                    </form:label>

                                    <form:fields> 
                                        <Input required="true" id="productInput2" placeholder="Transportadora"   showSuggestion="true" showValueHelp="true" valueHelpRequest=".onValueHelpRequest2"/>
                                    </form:fields>
                                </form:FormElement>



                                <form:FormElement  id="formVeiculo" visible="false">
                                    <form:label>
                                        <Label text="Veículo(s)"  design="Standard" textAlign="Begin" textDirection="Inherit" />
                                    </form:label>

                                    <form:fields> 
                                    <Text ></Text>
                                    </form:fields>
                                </form:FormElement>



                            </form:formElements>
                        </form:FormContainer>

                    </form:formContainers>
                </form:Form>
                
                <Toolbar width="100%" height="1em"  />
                <Table id="tableCompartimentos" noDataText="Sem Licenças"  mode="SingleSelect" inset="false" items="{
                                path: '/'
                            }" busyIndicatorDelay="200" autoPopinMode="true">
                    <headerToolbar>
                        <OverflowToolbar>
                            <Title text="Licenças" level="H2" />
                            <ToolbarSpacer/>
                            <Button icon="sap-icon://add" press="onAddLinha" text="Adicionar uma nova Licença" />
                            <Button id="buttonDelete" visible="false" icon="sap-icon://delete" press="onAddLinha" text="Eliminar Licença" />
                        </OverflowToolbar>
                    </headerToolbar>
                    <columns>
                        <Column hAlign="Center" importance="High" width="6em">
                            <Text text="Tipo" />
                        </Column>
                        <Column hAlign="Center" importance="High" width="7em">
                            <Text text="N° Carteira" />
                        </Column>

                        <Column hAlign="Center" width="7em" demandPopin="true" importance="Low">
                            <Text text="Início da Validade" />
                        </Column>

                        <Column demandPopin="true" importance="Low" width="14em">
                            <Text text="Fim da validade" />
                        </Column>

                        <Column demandPopin="true" hAlign="Center" importance="Low" width="6em">
                            <Text text="Descrição" />
                        </Column>

                    </columns>
                    <items>
                        <ColumnListItem vAlign="Middle">
                            <cells>
                                <Input id="tipoLicencaD" placeholder="Categoria da liçenca de habilitação" showSuggestion="true" showValueHelp="true" valueHelpRequest=".onValueHelpRequest" suggestionItems="{/ProductCollection}">
                                    <suggestionItems>
                                        <core:Item text="{Name}" />
                                    </suggestionItems>
                                </Input>
                                <ObjectIdentifier text="{IdComp}" />
                                <ObjectIdentifier text="{Contrato}"/>
                                <ObjectIdentifier title="{Maktx}" text="{Matnr}" />
                                <ObjectIdentifier text="{TimeAgend}" />
                                <ObjectNumber number="{ parts: [{path:'Qtde'}],
                                                        type: 'sap.ui.model.type.Float' }" unit="{Meins}" />

                                <Input id="inputLgort" value="{Lgort}" type="Text" valueLiveUpdate="true" editable="{= ${controlScreen>/editMode} &amp;&amp; ${MainLine} === 'X'}" valueHelpOnly="true" valueHelpRequest="onSelectDialogPress" showValueHelp="true" width="6em">
                                    <customData>
                                        <core:CustomData key="title" value="Depósito" />
                                        <core:CustomData key="key" value="Lgort" />
                                        <core:CustomData key="path" value="/SH_DepositoSet" />
                                        <core:CustomData key="multi" value="false" />
                                        <core:CustomData key="descr" value="Lgobe" />
                                    </customData>
                                </Input>

                                <Input value="{Lacre}" type="Text" fieldWidth="{60%}" valueLiveUpdate="true" editable="{controlScreen>/editMode}" maxLength="10" width="8em" />
                                <!-- <Input value="{Cor}" type="Text" fieldWidth="60%" valueLiveUpdate="true" editable="{/editMode}" /> -->

                                <ComboBox value="{Cor}" items="{
                                            path: 'main>/SH_CorSet',
                                            sorter: { path: 'CorLacre' },
                                            templateShareable : true
                                        }" editable="{controlScreen>/editMode}" change="onChangeComboBox" width="8em">
                                    <core:Item key="{main>CorLacre}" text="{main>CorLacre}" />
                                </ComboBox>

                                <Input value="{Amostra}" type="Text" fieldWidth="60%" valueLiveUpdate="true" editable="{= ${controlScreen>/editMode} &amp;&amp; ${MainLine} === 'X'}" maxLength="16" width="8em" />

                                <FlexBox alignItems="Start" justifyContent="SpaceAround">
                                    <Input id="inputPesoEntrada" value="{PesoEntrada}" type="Text" valueLiveUpdate="true" editable="{= ${controlScreen>/editMode} &amp;&amp; ${MainLine} === 'X'}" liveChange="OnFieldInt" maxLength="6" width="5em" />
                                    <Button id='buttonPesoEntrada' tooltip="Adquirir peso da balança" icon="sap-icon://inbox" type="Emphasized" enabled="{= ${controlScreen>/editMode} &amp;&amp; ${MainLine} === 'X'}" press="onButtonPeso" />
                                </FlexBox>


                                <!-- Exemplo abaixo usando a função
                                 <Input id="inputPesoEntrada" value="{PesoEntrada}" type="Text" fieldWidth="60%" valueLiveUpdate="true" editable="{path: '', formatter: '.isEditable'}" liveChange="OnFieldInt" maxLength="6" /> -->


                                <FlexBox alignItems="Start" justifyContent="SpaceBetween">
                                    <Input id="inputPesoSaida" value="{PesoSaida}" type="Text" valueLiveUpdate="true" editable="{= ${controlScreen>/editMode} &amp;&amp; ${MainLine} === 'X'}" liveChange="OnFieldInt" maxLength="6" width="5em" />
                                    <Button id='buttonPesoSaida' icon="sap-icon://inbox" type="Emphasized" tooltip="Adquirir peso da balança" press="onButtonPeso" enabled="{= ${controlScreen>/editMode} &amp;&amp; ${MainLine} === 'X'}"/>
                                </FlexBox>

                                <!-- <ObjectNumber number="{WeightMeasure}" unit="{WeightUnit}" state="{
                                                            path: 'WeightMeasure',
                                                            formatter: 'sap.m.sample.TableVerticalAlignment.Formatter.weightState'
                                                        }" /> -->
                                <!-- <ObjectNumber number="{
                                                            parts:[{path:'Price'},{path:'CurrencyCode'}],
                                                            type: 'sap.ui.model.type.Currency',
                                                            formatOptions: {showMeasure: false}
                                                        }" unit="{CurrencyCode}" /> -->
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
                <Toolbar width="100%" height="1em"/>
                <Table id="idProductsTable" items="{ path: 'turnos>/' }"  visible="false" noDataText="Esse motorista ainda não teve agendamentos de transporte">
                    <headerToolbar>
                        <OverflowToolbar>
                            <Title text="Transportes" level="H2" />
                            <ToolbarSpacer/>
                        </OverflowToolbar>
                    </headerToolbar>
                    <columns>
                        <Column width="12em">
                            <Text text=""/>
                        </Column>
                        <Column minScreenWidth="Tablet" demandPopin="true" >
                            <Text text="Data início"/>
                        </Column>
                        <Column minScreenWidth="Desktop" demandPopin="true" hAlign="End">
                            <Text text="Data Fim"/>
                        </Column>
                        <Column minScreenWidth="Desktop" demandPopin="true" hAlign="Center">
                            <Text text="Hora do turno"/>
                        </Column>
                        <Column hAlign="End">
                            <Text text="Transportadora"/>
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem vAlign="Middle">
                            <cells>
                                <ObjectIdentifier title="{FirstName} {LastName}" text="N° Motorista: {Drivercode}"/>
                                <Text text="{Drvstatus}"/>
                                <Text text="{Width} x {Depth} x {Height} {DimUnit}"/>
                                <Text text="{Drvstatus}"/>
                                <Text text="{Drvstatus}"/>
                                <Button icon="sap-icon://navigation-right-arrow" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>


            </VBox>

        </content>

        <footer>
            <OverflowToolbar width="100%" height="46px" design="Auto" enabled="true" visible="{controlScreen>/noFinished}">
                <content>
                    <ToolbarSpacer width="" />
                    <Button text="Salvar" type="Default" iconFirst="true" width="auto" enabled="true" visible="{controlScreen>/editMode}" iconDensityAware="false" press="onButtonSave" icon="sap-icon://save" />
                    <Button text="Cancelar" type="Reject" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false" press="onButtonCancel" />

                </content>
            </OverflowToolbar>
        </footer>
        <headerContent />
        <subHeader />
        <customHeader />

    </Page>
</mvc:View>
